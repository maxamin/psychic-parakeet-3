# Generated by Django 4.1.2 on 2022-11-10 16:19

from django.db import migrations, models
from django.utils import timezone


def generate_planned_disclosure_date(apps, schema_editor):
    Vulnerability = apps.get_model('responsible_disc', 'Vulnerability')
    for vulnerability in Vulnerability.objects.all():
        vulnerability.date_planned_disclosure = vulnerability.date_created + timezone.timedelta(days=60)
        vulnerability.save()


class Migration(migrations.Migration):

    dependencies = [
        ('responsible_disc', '0012_vulnerability_internal_id'),
    ]

    operations = [
        migrations.AddField(
            model_name='vulnerability',
            name='date_planned_disclosure',
            field=models.DateField(null=True),
            preserve_default=False,
        ),
        migrations.RunPython(generate_planned_disclosure_date),
        migrations.AlterField(model_name='vulnerability', name='date_planned_disclosure', field=models.DateField())
    ]
