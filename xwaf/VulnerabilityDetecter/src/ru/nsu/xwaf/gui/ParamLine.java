package ru.nsu.xwaf.gui;

import ru.nsu.xwaf.exceptions.FieldNotFilledException;

import javax.swing.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

/**
 * One parameters line.
 * <br>Contains text field for parameter name and combo box for type choice.
 * @author Alexander Ilin
 */
public class ParamLine extends JPanel {

    private ParamPanel parentPanel;
    private JTextField nameField = new JTextField(10);
    private JComboBox<ParamType> typeField = new JComboBox<ParamType>(ParamType.values());

    public enum ParamType {
        STRING,
        INTEGER
    }

    public String getText() throws FieldNotFilledException {
        String text = nameField.getText();
        if (text.isEmpty()) {
            throw new FieldNotFilledException();
        }
        else {
            return text;
        }
    }

    public ParamType getType() {
        return (ParamType)typeField.getSelectedItem();
    }

    public ParamLine(ParamPanel parentPanel) {
        this.parentPanel = parentPanel;
        this.add(new JLabel("name"));
        this.add(nameField);
        this.add(new JLabel("type"));
        this.add(typeField);
        JButton removeButton = new JButton("remove");
        removeButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                ParamLine.this.parentPanel.deleteParam(ParamLine.this);
            }
        });
        this.add(removeButton);
    }
}
