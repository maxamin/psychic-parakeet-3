# 5.1 State Variable Default Visibility Vulnerability

Category: Smart Contract Vulnerabilities
Tags: Execution

State Variable Default Visibility Vulnerability is a type of vulnerability in smart contracts that occurs due to the default visibility of state variables. In Solidity, state variables have internal visibility by default, meaning that they can be accessed by other functions within the same contract but not by functions in other contracts. However, if a developer forgets to explicitly specify the visibility of a state variable, it can become publicly visible, which could lead to unintended consequences.

In Solidity, functions have visibility specifiers that limit how they can be called. A function's visibility specifies whether it can be called only internally, only externally, by users, by other derived contracts, or only internally. The [Solidity Docs](http://solidity.readthedocs.io/en/latest/contracts.html?highlight=library#visibility-and-getters) offer a detailed explanation of the four visibility specifiers. The default visibility setting for a function is "public," allowing external calls by other users. This section will explore various devastating vulnerabilities in smart contracts that may result from improper usage of visibility specifiers.

Example

Functions have a public visibility setting by default. The result is that external users will be allowed to invoke functions that do not indicate any visibility. The issue is that developers may overlook visibility specifiers on functions that should be private (or only callable within the contract itself).

Let's look at a simple example:

```
contract HashForEther {

    function withdrawWinnings() {
        // Winner if the last 8 hex characters of the address are 0.
        require(uint32(msg.sender) == 0);
        _sendWinnings();
     }

     function _sendWinnings() {
         msg.sender.transfer(this.balance);
     }
}

```

[view raw](https://gist.github.com/vasa-develop/21cc35d8a48d7768ab6acaff28b5a445/raw/82a7cd87b6e9da9dcc4a880f29f9ff86bde172d0/HashForEther.sol)[HashForEther.sol](https://gist.github.com/vasa-develop/21cc35d8a48d7768ab6acaff28b5a445#file-hashforether-sol) hosted with by [GitHub](https://github.com/)

This simple contract is intended to function as a guess-the-address bounty game. A user must create an Ethereum address with the last 8 hex characters set to 0, in order to win the contract's balance. After they have it, they can use the WithdrawWinnings() function to get their reward. However, nothing has been said about how visible the functions will be. In particular, the function _sendWinnings() is public, allowing any address to use it to steal the payout.

Mitigation

Even if a function is intended to be publicly accessible, it is best practice to always declare the visibility of the function in a contract. To promote this practice, Solidity's most recent releases will now display warnings during compilation for functions that do not explicitly set their visibility.